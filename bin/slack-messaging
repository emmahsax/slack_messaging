#!/usr/bin/env ruby
require 'rubygems'
require 'gli'
require_relative '../lib/slack_messaging'

include GLI::App

program_desc 'Slack Messaging'
version SlackMessaging::VERSION

wrap_help_text :verbatim

flag [:config], :desc => 'SlackMessaging config file path', :default_value => SlackMessaging::DefaultPaths.config

program_long_desc """
DOCUMENTATION
"""

desc 'Prints a variety of messages to Slack'
command 'slack' do |c|
  c.action do |global_options, options, args|
    SlackMessaging::Slack.execute(args, options) # args are optional string to print
  end
end

pre do |global,command,options,args|
  SlackMessaging::Config.load(global[:config])
  SlackMessaging::Config.set_config_options(global)
  true
end

exit run(ARGV)
